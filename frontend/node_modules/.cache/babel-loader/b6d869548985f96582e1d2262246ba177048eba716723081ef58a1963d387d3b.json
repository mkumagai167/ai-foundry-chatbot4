{"ast":null,"code":"// frontend/src/components/FileUpload.jsx\nimport React,{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function FileUpload(_ref){let{onFileUploaded}=_ref;const[uploading,setUploading]=useState(false);const[file,setFile]=useState(null);const[error,setError]=useState(null);const handleUpload=async()=>{if(!file)return;setUploading(true);setError(null);const reader=new FileReader();reader.onload=async()=>{try{const base64Data=reader.result.split(\",\")[1];// Strip data:*/*;base64,\nconst response=await fetch(\"/api/uploadToVectorStore\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({fileName:file.name,fileType:file.type,base64Data})});const text=await response.text();let result;try{result=JSON.parse(text);}catch(err){throw new Error(\"Server returned invalid JSON: \"+text);}if(!response.ok){throw new Error(result.error||\"Upload failed\");}if(onFileUploaded&&result.fileId){onFileUploaded(result.fileId);}alert(\"✅ File uploaded successfully: \"+result.fileId);}catch(err){console.error(\"Upload error:\",err);setError(err.message);alert(\"Upload error: \"+err.message);}finally{setUploading(false);setFile(null);}};reader.readAsDataURL(file);};return/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>setFile(e.target.files[0]),disabled:uploading}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,disabled:!file||uploading,style:{marginLeft:8},children:uploading?\"Uploading...\":\"Upload\"}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\",marginTop:8},children:[\"\\u274C \",error]})]});}","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","FileUpload","_ref","onFileUploaded","uploading","setUploading","file","setFile","error","setError","handleUpload","reader","FileReader","onload","base64Data","result","split","response","fetch","method","headers","body","JSON","stringify","fileName","name","fileType","type","text","parse","err","Error","ok","fileId","alert","console","message","readAsDataURL","style","marginTop","children","onChange","e","target","files","disabled","onClick","marginLeft","color"],"sources":["C:/Users/M.Kumagai/Documents/React/ai-foundry-chatbot4/frontend/src/components/FileUpload.jsx"],"sourcesContent":["// frontend/src/components/FileUpload.jsx\r\nimport React, { useState } from \"react\";\r\n\r\nexport default function FileUpload({ onFileUploaded }) {\r\n  const [uploading, setUploading] = useState(false);\r\n  const [file, setFile] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  const handleUpload = async () => {\r\n    if (!file) return;\r\n\r\n    setUploading(true);\r\n    setError(null);\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = async () => {\r\n      try {\r\n        const base64Data = reader.result.split(\",\")[1]; // Strip data:*/*;base64,\r\n        const response = await fetch(\"/api/uploadToVectorStore\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            fileName: file.name,\r\n            fileType: file.type,\r\n            base64Data,\r\n          }),\r\n        });\r\n\r\n        const text = await response.text();\r\n        let result;\r\n\r\n        try {\r\n          result = JSON.parse(text);\r\n        } catch (err) {\r\n          throw new Error(\"Server returned invalid JSON: \" + text);\r\n        }\r\n\r\n        if (!response.ok) {\r\n          throw new Error(result.error || \"Upload failed\");\r\n        }\r\n\r\n        if (onFileUploaded && result.fileId) {\r\n          onFileUploaded(result.fileId);\r\n        }\r\n\r\n        alert(\"✅ File uploaded successfully: \" + result.fileId);\r\n      } catch (err) {\r\n        console.error(\"Upload error:\", err);\r\n        setError(err.message);\r\n        alert(\"Upload error: \" + err.message);\r\n      } finally {\r\n        setUploading(false);\r\n        setFile(null);\r\n      }\r\n    };\r\n\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  return (\r\n    <div style={{ marginTop: 12 }}>\r\n      <input\r\n        type=\"file\"\r\n        onChange={(e) => setFile(e.target.files[0])}\r\n        disabled={uploading}\r\n      />\r\n      <button\r\n        onClick={handleUpload}\r\n        disabled={!file || uploading}\r\n        style={{ marginLeft: 8 }}\r\n      >\r\n        {uploading ? \"Uploading...\" : \"Upload\"}\r\n      </button>\r\n      {error && (\r\n        <div style={{ color: \"red\", marginTop: 8 }}>\r\n          ❌ {error}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}