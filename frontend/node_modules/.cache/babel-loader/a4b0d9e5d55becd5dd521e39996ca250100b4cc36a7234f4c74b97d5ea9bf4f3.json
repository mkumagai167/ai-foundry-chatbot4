{"ast":null,"code":"// frontend/src/services/api.js\n\nexport async function postToBackend(message, accessToken, fileIds = []) {\n  try {\n    const bodyPayload = {\n      message\n    };\n\n    // ✅ Only include fileIds if any were uploaded\n    if (fileIds.length > 0) {\n      bodyPayload.fileIds = fileIds;\n    }\n    const response = await fetch(\"http://localhost:7071/api/runAgent\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${accessToken}`\n      },\n      body: JSON.stringify(bodyPayload)\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(`Backend error: ${response.status} - ${errorData.error || \"Unknown error\"}`);\n    }\n    return await response.json();\n  } catch (err) {\n    console.error(\"postToBackend error:\", err);\n    throw err;\n  }\n}","map":{"version":3,"names":["postToBackend","message","accessToken","fileIds","bodyPayload","length","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","Error","status","error","err","console"],"sources":["C:/Users/M.Kumagai/Documents/React/ai-foundry-chatbot4/frontend/src/services/api.js"],"sourcesContent":["// frontend/src/services/api.js\r\n\r\nexport async function postToBackend(message, accessToken, fileIds = []) {\r\n  try {\r\n    const bodyPayload = {\r\n      message,\r\n    };\r\n\r\n    // ✅ Only include fileIds if any were uploaded\r\n    if (fileIds.length > 0) {\r\n      bodyPayload.fileIds = fileIds;\r\n    }\r\n\r\n    const response = await fetch(\"http://localhost:7071/api/runAgent\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${accessToken}`,\r\n      },\r\n      body: JSON.stringify(bodyPayload),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(`Backend error: ${response.status} - ${errorData.error || \"Unknown error\"}`);\r\n    }\r\n\r\n    return await response.json();\r\n  } catch (err) {\r\n    console.error(\"postToBackend error:\", err);\r\n    throw err;\r\n  }\r\n}\r\n"],"mappings":"AAAA;;AAEA,OAAO,eAAeA,aAAaA,CAACC,OAAO,EAAEC,WAAW,EAAEC,OAAO,GAAG,EAAE,EAAE;EACtE,IAAI;IACF,MAAMC,WAAW,GAAG;MAClBH;IACF,CAAC;;IAED;IACA,IAAIE,OAAO,CAACE,MAAM,GAAG,CAAC,EAAE;MACtBD,WAAW,CAACD,OAAO,GAAGA,OAAO;IAC/B;IAEA,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAAC,oCAAoC,EAAE;MACjEC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAE,UAAUP,WAAW;MACxC,CAAC;MACDQ,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACR,WAAW;IAClC,CAAC,CAAC;IAEF,IAAI,CAACE,QAAQ,CAACO,EAAE,EAAE;MAChB,MAAMC,SAAS,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MACvC,MAAM,IAAIC,KAAK,CAAC,kBAAkBV,QAAQ,CAACW,MAAM,MAAMH,SAAS,CAACI,KAAK,IAAI,eAAe,EAAE,CAAC;IAC9F;IAEA,OAAO,MAAMZ,QAAQ,CAACS,IAAI,CAAC,CAAC;EAC9B,CAAC,CAAC,OAAOI,GAAG,EAAE;IACZC,OAAO,CAACF,KAAK,CAAC,sBAAsB,EAAEC,GAAG,CAAC;IAC1C,MAAMA,GAAG;EACX;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}